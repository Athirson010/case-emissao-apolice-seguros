# ===========================================
# Component Test Configuration
# ===========================================
# This file contains test-specific configurations
# All external dependencies are mocked - no real infrastructure needed

spring.application.name=order-application-test

# Active profiles are configured via @ActiveProfiles("test") in BaseComponentTest
# Do NOT set spring.profiles.active here - it causes InvalidConfigDataPropertyException

# =========================
# Server Configuration
# =========================
server.port=0
# Random port for tests to avoid conflicts

# =========================
# MongoDB Configuration (Mocked)
# =========================
# IMPORTANT: MongoDB connection is mocked with @MockBean
# MongoClient, MongoTemplate and repositories are all mocked
# These are dummy values - no real connection will be made
spring.data.mongodb.uri=mongodb://localhost:27017/test_db
spring.data.mongodb.auto-index-creation=false

# =========================
# RabbitMQ Configuration (Mocked)
# =========================
# IMPORTANT: RabbitMQ is completely disabled - all operations are mocked
# RabbitTemplate is mocked with @MockBean
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.listener.simple.auto-startup=false
spring.rabbitmq.listener.direct.auto-startup=false

# RabbitMQ Exchanges
rabbitmq.exchanges.order-integration=test.order.integration.exchange

# RabbitMQ Queues
rabbitmq.queues.order-consumer=test.order-service-consumer
rabbitmq.queues.insurance-response=test.order.insurance.response.queue
rabbitmq.queues.payment-response=test.order.payment.response.queue

# RabbitMQ Routing Keys
rabbitmq.routing-keys.order=order.process
rabbitmq.routing-keys.insurance-response=insurance.response
rabbitmq.routing-keys.payment-response=payment.response

# =========================
# Kafka Configuration (Mocked)
# =========================
# IMPORTANT: Kafka is completely disabled - all operations are mocked
# KafkaTemplate is mocked with @MockBean
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.group-id=test-consumer-group
spring.kafka.consumer.auto-startup=false
spring.kafka.listener.auto-startup=false

# Kafka Topics
kafka.topic.insurance=test-insurance-topic
kafka.topic.order=test-order-topic
kafka.topic.payment=test-payment-topic

# =========================
# Logging Configuration
# =========================
logging.level.root=INFO
logging.level.io.github.athirson010=DEBUG
logging.level.org.springframework.test=DEBUG
logging.level.org.springframework.amqp=DEBUG
logging.level.org.springframework.kafka=DEBUG
logging.level.org.testcontainers=INFO

# =========================
# Actuator Configuration
# =========================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# =========================
# Test-Specific Configurations
# =========================
# Enable/disable features for testing
# MockMvc print output disabled for cleaner test logs

# Test timeout configurations
test.timeout.seconds=30
test.retry.max-attempts=3

# External Service Mock URLs (WireMock)
external.service.insurance.url=http://localhost:8090/insurance
external.service.payment.url=http://localhost:8091/payment

# =========================
# Testcontainers Configuration
# =========================
# Disable Testcontainers cloud features
testcontainers.reuse.enable=true

# =========================
# Test Data Configuration
# =========================
# Sample test data values
test.data.customer-id=123e4567-e89b-12d3-a456-426614174000
test.data.product-id=PROD-AUTO-2024
test.data.policy-number-prefix=TEST-POL
test.data.default-premium-amount=350.00
test.data.default-insured-amount=200000.00
